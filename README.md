# discourse-抽奖插件

## 功能简介
- 发起人可在指定板块/标签下按模板发帖发起抽奖
- 抽奖帖需写明：抽奖名称、奖品、获奖人数、开奖时间、其他说明
- **新增：完整的参数校验功能，确保抽奖信息完整性和格式正确性**
- 用户按要求回复即参与，无需点击按钮
- 到开奖时间自动抽奖，剔除发起人和重复用户
- 自动在主题内公布中奖名单

## 参数校验功能 🆕
- **必填字段验证**：抽奖名称、奖品、获奖人数、开奖时间
- **格式验证**：获奖人数必须为正整数、开奖时间必须为未来时间
- **长度验证**：字段长度限制（抽奖名称和奖品不超过255字符）
- **业务规则验证**：获奖人数范围1-1000
- **友好错误提示**：中文错误信息，便于用户理解和修正
- **后端安全验证**：所有验证在服务端完成，确保接口安全

## 使用方法
1. 管理员设置允许抽奖的标签（如 抽奖活动）
2. 发帖格式示例：
   ```
   抽奖名称：2025年夏季抽奖
   奖品：蓝牙耳机一副
   获奖人数：2
   开奖时间：2025-07-10 20:00
   其他说明：每人仅限一次，仅限回复参与
   ```
3. 用户只需回复参与
4. 插件自动开奖并公布结果

## 安装方法
参考 Discourse 插件安装说明，将本插件仓库添加到 app.yml
```
- git clone https://github.com/macgowge/discourse-choujiang.git
```
